<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>simpleMap</title>
    <link rel="stylesheet" href="./main.css" />
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=rhBhZHnGx33woHDud5DxD78vIvDQVnz77GgdvZLv"></script>
    <script src="//cdn.jsdelivr.net/npm/eruda"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="./nav.js"></script>
    <script>
      eruda.init();

      const socket = io.connect("http://localhost:3000/navigation", {
        path: "/socket.io",
        transports: ["websocket"],
      });

      function registerEvent() {
        const startNavBtn = document.querySelector(".startNav");
        const endNavBtn = document.querySelector(".endNav");

        startNavBtn.addEventListener("click", startNav);
        endNavBtn.addEventListener("click", endNav);
      }

      // 이벤트 핸들러 함수
      function startNav(e) {
        e.preventDefault();
        console.log("네비게이션 연결시작");
        socket.on("connect", () => {});
      }

      function endNav(e) {
        e.preventDefault();
        console.log("네비게이션 연결종료");
        socket.off("disconnect", () => {});
      }

      document.addEventListener("DOMContentLoaded", registerEvent);
    </script>
  </head>
  <body onload="initTmap();">
    <div id="map_wrap" class="map_wrap3">
      <div id="map_div"></div>
    </div>
    <div class="map_act_btn_wrap clear_box"></div>
    <div id="result"></div>
    <form action="/navigation" id="startNavigation" method="get"></form>
    <button class="startNav" onClick="startNav()">길찾기 시작</button>
    <button class="endNav" onClick="endNav()">길찾기 종료</button>
  </body>
</html>
